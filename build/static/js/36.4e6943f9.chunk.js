"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[36],{7036:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(4165),s=n(5861),a=n(3433),c=n(9439),i=n(1405),o="editProduct_editProductWrapper__ptFV5",u="editProduct_field__+kn66",d=n(2791),l=n(8174),p=n(7689),f=n(184),h=function(){var e=(0,i.v9)((function(e){return e.currentUser.token})),t=(0,p.UO)(),n=(0,d.useRef)(),h=(0,d.useRef)(),x=(0,d.useRef)(),m=(0,d.useRef)(),v=(0,d.useRef)(),_=(0,d.useRef)(),g=(0,d.useState)(),j=(0,c.Z)(g,2),S=j[0],b=j[1],E=S?(0,a.Z)(S):[],O=(0,p.s0)(),P=(0,d.useState)(),T=(0,c.Z)(P,2),C=T[0],R=T[1],k=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){var s,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL+"/admin/product/".concat(t.productId),{credentials:"include",headers:{Authorization:e}});case 2:return s=n.sent,n.next=5,s.json();case 5:if(a=n.sent,s.ok){n.next=8;break}throw new Error("Loading failed !");case 8:console.log("data",a),R(a);case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,d.useEffect)((function(){k()}),[]);var w=function(){var a=(0,s.Z)((0,r.Z)().mark((function s(a){var c,i,o,u,d,p,f,_,g;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(r.prev=0,a.preventDefault(),c=n.current.value,i=x.current.value,o=h.current.value,u=m.current.value,d=v.current.value,(p=new FormData).append("name",c),p.append("price",o),p.append("category",i),p.append("long_desc",u),p.append("short_desc",d),f=0;f<E.length;f++)p.append("images",E[f]);return r.next=16,fetch({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL+"/admin/product/".concat(t.productId),{credentials:"include",method:"PUT",headers:{Authorization:e},body:p});case 16:return _=r.sent,r.next=19,_.json();case 19:if(g=r.sent,console.log("result",g),_.ok){r.next=24;break}throw l.Am.error("".concat(g.message)),new Error("Loading failed !");case 24:l.Am.success("".concat(g.message)),setTimeout((function(){O("/product")}),2e3),r.next=31;break;case 28:r.prev=28,r.t0=r.catch(0),console.log(r.t0);case 31:case"end":return r.stop()}}),s,null,[[0,28]])})));return function(e){return a.apply(this,arguments)}}();return(0,f.jsx)(f.Fragment,{children:C&&(0,f.jsxs)("div",{className:o,children:[(0,f.jsx)("h2",{children:"Edit Product"}),(0,f.jsxs)("form",{onSubmit:w,children:[(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("label",{children:"Product Name"}),(0,f.jsx)("input",{type:"text",id:"name",ref:n,defaultValue:C.name})]}),(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("label",{children:"Category"}),(0,f.jsx)("input",{type:"text",id:"category",ref:x,defaultValue:C.category})]}),(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("label",{children:"Price"}),(0,f.jsx)("input",{type:"number",id:"price",ref:h,defaultValue:C.price})]}),(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("label",{children:"Short Description"}),(0,f.jsx)("textarea",{row:"4",id:"longdesc",ref:v,defaultValue:C.short_desc})]}),(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("label",{children:"Long Description"}),(0,f.jsx)("textarea",{rows:"4",id:"shortdesc",ref:m,defaultValue:C.long_desc})]}),(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("label",{children:"Images (4 images )"}),(0,f.jsx)("input",{type:"file",id:"images",name:"images",ref:_,multiple:!0,onChange:function(e){b(e.target.files)}})]}),(0,f.jsx)("button",{type:"submit",id:"edit",children:"Update Product"}),(0,f.jsx)("button",{id:"cancel",onClick:function(){O("/product")},children:"Cancel"})]}),(0,f.jsx)(l.Ix,{position:"top-center",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})},x=function(){return(0,f.jsx)(h,{})}}}]);
//# sourceMappingURL=36.4e6943f9.chunk.js.map