{"version":3,"file":"static/js/36.4e6943f9.chunk.js","mappings":"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","sources":["webpack://myapp/./src/components/editProduct/editProduct.module.css?9c93","components/editProduct/EditProduct.js","page/EditProductPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"editProductWrapper\":\"editProduct_editProductWrapper__ptFV5\",\"field\":\"editProduct_field__+kn66\"};","import { useSelector } from \"react-redux\";\r\nimport classes from \"./editProduct.module.css\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\n\r\nconst EditProduct = () => {\r\n  const token = useSelector((state) => state.currentUser.token);\r\n  const params = useParams();\r\n  const nameInputRef = useRef();\r\n  const priceInputRef = useRef();\r\n  const categoryInputRef = useRef();\r\n  const longdescInputRef = useRef();\r\n  const shortdescInputRef = useRef();\r\n  const imagesInputRef = useRef();\r\n  const [fileList, setFileList] = useState();\r\n  const files = fileList ? [...fileList] : [];\r\n  const navigate = useNavigate();\r\n  const [product, setProduct] = useState();\r\n\r\n  const fetchProductFromBE = async () => {\r\n    const res = await fetch(\r\n      process.env.API_URL + `/admin/product/${params.productId}`,\r\n      {\r\n        credentials: \"include\",\r\n        headers: {\r\n          Authorization: token,\r\n        },\r\n      }\r\n    );\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      throw new Error(\"Loading failed !\");\r\n    }\r\n    console.log(\"data\", data);\r\n    setProduct(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProductFromBE();\r\n  }, []);\r\n\r\n  const submitForm = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const enterNameInputRef = nameInputRef.current.value;\r\n      const enterCategoryInputRef = categoryInputRef.current.value;\r\n      const enterPriceInputRef = priceInputRef.current.value;\r\n      const enterLongdescInputRef = longdescInputRef.current.value;\r\n      const enterShortdescInputRef = shortdescInputRef.current.value;\r\n      // if (!fileList) {\r\n      //   throw new Error(\"No file chosen !\");\r\n      // }\r\n      let data = new FormData();\r\n      data.append(\"name\", enterNameInputRef);\r\n      data.append(\"price\", enterPriceInputRef);\r\n      data.append(\"category\", enterCategoryInputRef);\r\n      data.append(\"long_desc\", enterLongdescInputRef);\r\n      data.append(\"short_desc\", enterShortdescInputRef);\r\n      for (let i = 0; i < files.length; i++) {\r\n        data.append(\"images\", files[i]);\r\n      }\r\n      const res = await fetch(\r\n        process.env.API_URL + `/admin/product/${params.productId}`,\r\n        {\r\n          credentials: \"include\",\r\n          method: \"PUT\",\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n          body: data,\r\n        }\r\n      );\r\n      const result = await res.json();\r\n      console.log(\"result\", result);\r\n      if (!res.ok) {\r\n        toast.error(`${result.message}`);\r\n        throw new Error(\"Loading failed !\");\r\n      }\r\n      // const result = await res.json();\r\n      toast.success(`${result.message}`);\r\n      setTimeout(() => {\r\n        navigate(\"/product\");\r\n      }, 2000);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    setFileList(e.target.files);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {product && (\r\n        <div className={classes.editProductWrapper}>\r\n          <h2>Edit Product</h2>\r\n          <form onSubmit={submitForm}>\r\n            <div className={classes.field}>\r\n              <label>Product Name</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"name\"\r\n                ref={nameInputRef}\r\n                defaultValue={product.name}\r\n              ></input>\r\n            </div>\r\n            <div className={classes.field}>\r\n              <label>Category</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"category\"\r\n                ref={categoryInputRef}\r\n                defaultValue={product.category}\r\n              ></input>\r\n            </div>\r\n            <div className={classes.field}>\r\n              <label>Price</label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"price\"\r\n                ref={priceInputRef}\r\n                defaultValue={product.price}\r\n              ></input>\r\n            </div>\r\n            <div className={classes.field}>\r\n              <label>Short Description</label>\r\n              <textarea\r\n                row=\"4\"\r\n                id=\"longdesc\"\r\n                ref={shortdescInputRef}\r\n                defaultValue={product.short_desc}\r\n              ></textarea>\r\n            </div>\r\n            <div className={classes.field}>\r\n              <label>Long Description</label>\r\n              <textarea\r\n                rows=\"4\"\r\n                id=\"shortdesc\"\r\n                ref={longdescInputRef}\r\n                defaultValue={product.long_desc}\r\n              ></textarea>\r\n            </div>\r\n            <div className={classes.field}>\r\n              <label>Images (4 images )</label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"images\"\r\n                name=\"images\"\r\n                ref={imagesInputRef}\r\n                multiple\r\n                onChange={handleFileChange}\r\n              ></input>\r\n            </div>\r\n            <button type=\"submit\" id=\"edit\">\r\n              Update Product\r\n            </button>\r\n            <button\r\n              id=\"cancel\"\r\n              onClick={() => {\r\n                navigate(\"/product\");\r\n              }}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </form>\r\n          <ToastContainer\r\n            position=\"top-center\"\r\n            autoClose={2000}\r\n            hideProgressBar={false}\r\n            newestOnTop={false}\r\n            closeOnClick={false}\r\n            rtl={false}\r\n            pauseOnFocusLoss\r\n            draggable\r\n            pauseOnHover\r\n            theme=\"light\"\r\n          />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditProduct;\r\n","import EditProduct from \"../components/editProduct/EditProduct\";\r\n\r\nconst EditProductPage = () => {\r\n  return <EditProduct />;\r\n};\r\n\r\nexport default EditProductPage;\r\n"],"names":["token","useSelector","state","currentUser","params","useParams","nameInputRef","useRef","priceInputRef","categoryInputRef","longdescInputRef","shortdescInputRef","imagesInputRef","_useState","useState","_useState2","_slicedToArray","fileList","setFileList","files","_toConsumableArray","navigate","useNavigate","_useState3","_useState4","product","setProduct","fetchProductFromBE","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_context","prev","next","fetch","process","API_URL","concat","productId","credentials","headers","Authorization","sent","json","ok","Error","console","log","stop","apply","arguments","useEffect","submitForm","_ref2","_callee2","e","enterNameInputRef","enterCategoryInputRef","enterPriceInputRef","enterLongdescInputRef","enterShortdescInputRef","i","result","_context2","preventDefault","current","value","FormData","append","length","method","body","toast","message","setTimeout","t0","_x","_jsx","_Fragment","children","_jsxs","className","classes","onSubmit","type","id","ref","defaultValue","name","category","price","row","short_desc","rows","long_desc","multiple","onChange","target","onClick","ToastContainer","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme","EditProduct"],"sourceRoot":""}