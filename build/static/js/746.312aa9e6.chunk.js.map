{"version":3,"file":"static/js/746.312aa9e6.chunk.js","mappings":"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","sources":["webpack://myapp/./src/components/detailPage/detailProduct.module.css?2501","components/detailPage/DetailProduct.js","page/DetailPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"detailProduct\":\"detailProduct_detailProduct__ilQwg\",\"miniImg\":\"detailProduct_miniImg__ZAqTj\",\"imgMain\":\"detailProduct_imgMain__3TFZQ\",\"detailDescription\":\"detailProduct_detailDescription__bd9g7\",\"middle\":\"detailProduct_middle__8esLa\",\"bottom\":\"detailProduct_bottom__YoxVi\",\"description\":\"detailProduct_description__cHKhy\",\"products\":\"detailProduct_products__-a+V8\",\"formButton\":\"detailProduct_formButton__tG1RZ\",\"backToShopBtn\":\"detailProduct_backToShopBtn__dK18Q\"};","import classes from \"./detailProduct.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Products from \"../homePage/Products\";\r\nimport { editPrice } from \"../../store/function\";\r\nimport { json, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"../../store/cartStore\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst DetailProduct = (props) => {\r\n  const data = useSelector((state) => state.data.currentData); //lay data tu store\r\n  const userActive = useSelector((state) => state.currentUser.email); // lay user hien tai\r\n  const userId = useSelector((state) => state.currentUser.userId); // lay userId hien tai\r\n  const userToken = useSelector((state) => state.currentUser.token); // lay userId hien tai\r\n  const cart = useSelector((state) => state.cart); //lay cart tu store\r\n\r\n  const [product, setProduct] = useState();\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const quantityInputRef = useRef();\r\n\r\n  const related = useCallback(\r\n    data.filter(\r\n      // loc cac san pham tuong tu category / khong lay san pham hien tai\r\n      (ele) => {\r\n        return ele.category === product?.category && ele._id !== product?._id;\r\n      }\r\n    ),\r\n    [product]\r\n  );\r\n\r\n  const fetchProduct = () => {\r\n    fetch(process.env.REACT_APP_API_URL + `/shop/product/${params.productId}`)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(\"data 45\", data);\r\n        setProduct(data.product);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProduct();\r\n  }, [data, params]);\r\n\r\n  const showDetailHandler = (index) => {\r\n    //show detail san pham lien quan\r\n    const idDetail = related[index]._id;\r\n    navigate(`/detail/${idDetail}`);\r\n  };\r\n\r\n  const backToShopHandler = (e) => {\r\n    // button quay lai shop\r\n    e.preventDefault();\r\n    navigate(\"/shop\");\r\n  };\r\n\r\n  //Xu ly du lieu add to cart\r\n  const addToCartHandler = async (e) => {\r\n    if (!userActive) {\r\n      //Neu chua dang nhap thi thong bao dang nhap\r\n      toast.warn(\"Login to continue !\");\r\n      return false;\r\n    }\r\n    if (!!userActive) {\r\n      await fetch(process.env.REACT_APP_API_URL + `/shop/cart/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: userToken,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          productId: product._id,\r\n          quantity: quantity,\r\n        }),\r\n      });\r\n      const res = await fetch(\r\n        process.env.REACT_APP_API_URL + `/shop/cart/${userId}`,\r\n        {\r\n          headers: {\r\n            Authorization: userToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await res.json();\r\n      dispatch(\r\n        cartActions.changeProductQuantity({ totalProduct: data.length })\r\n      );\r\n      toast.success(`Added`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {product && (\r\n        <div>\r\n          <div className={classes.detailProduct}>\r\n            {/* anh mini o ben trai  */}\r\n            <div className={classes.miniImg}>\r\n              {/* {product.image.map((ele, index) => {\r\n                <img src={ele} key={index}></img>;\r\n              })} */}\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[0]}\r\n                alt=\"image0\"\r\n              ></img>\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[1]}\r\n                alt=\"image1\"\r\n              ></img>\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[2]}\r\n                alt=\"image2\"\r\n              ></img>\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[3]}\r\n                alt=\"image3\"\r\n              ></img>\r\n            </div>\r\n            {/* anh chinh o giua  */}\r\n            <div className={classes.imgMain}>\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[0]}\r\n                alt=\"image0\"\r\n              ></img>\r\n            </div>\r\n\r\n            {/* thanh phan hien thi mo ta san pham o ben phai */}\r\n            <div className={classes.detailDescription}>\r\n              <h1>{product.name}</h1>\r\n              <h3>{editPrice(product.price)}</h3>\r\n              <p>{product.short_desc}</p>\r\n              <h3>Category : {product?.category}</h3>\r\n              <div className={classes.formButton}>\r\n                {/* form de lay du lieu cho vao cart */}\r\n                <form>\r\n                  <label htmlFor=\"\" for=\"qty\">\r\n                    Quantity:\r\n                  </label>\r\n                  <input\r\n                    ref={quantityInputRef}\r\n                    type=\"number\"\r\n                    name=\"qty\"\r\n                    id=\"qty\"\r\n                    min=\"1\"\r\n                    max=\"10\"\r\n                    step=\"1\"\r\n                    defaultValue={quantity}\r\n                    onChange={(e) => {\r\n                      setQuantity(e.target.value);\r\n                    }}\r\n                  />\r\n                </form>\r\n                {/* <button onClick={addToCartHandler}>Add to cart</button> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* MIDDLE thanh phan mo ta cu the  */}\r\n          //{\" \"}\r\n          <div className={classes.middle}>\r\n            <span>Description</span>\r\n            <h3>PRODUCT DESCRIPTION</h3>\r\n            <p className={classes.description}>{product.long_desc}</p>\r\n          </div>\r\n          {/* BOTTOM gom cac san pham lien quan */}{\" \"}\r\n          <div className={classes.bottom}>\r\n            <h3>RELATED PRODUCTS</h3>{\" \"}\r\n            <div className={classes.products}>\r\n              {/* Neu co san pham lien quan thi hien thi ra man hinh  */}\r\n              {related.length > 0 &&\r\n                related.map((ele, index) => (\r\n                  <Products\r\n                    key={index}\r\n                    item={ele} //obj chua thong tin san pham\r\n                    click={showDetailHandler} //click show san pham\r\n                    index={index} //index de hien thi\r\n                  />\r\n                ))}\r\n            </div>\r\n          </div>\r\n          {/* Button de quay lai trang shop */}\r\n          <div className={classes.backToShopBtn}>\r\n            <button onClick={backToShopHandler}> Back To ShopPage</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Luc moi tai trang, Component duoc render lan dau chua co du lieu thi hien thi Loading...  */}\r\n      {data.length === 0 && <h1>Loading...</h1>}\r\n      <ToastContainer\r\n        position=\"top-center\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"light\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DetailProduct;\r\n","import DetailProduct from \"../components/detailPage/DetailProduct\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst DetailPage = () => {\r\n  const params = useParams();\r\n\r\n  return (\r\n    <>\r\n      <DetailProduct id={params.productId} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DetailPage;\r\n"],"names":["props","data","useSelector","state","currentData","_useState","currentUser","email","userId","token","cart","useState","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","quantity","setQuantity","params","useParams","navigate","useNavigate","quantityInputRef","useDispatch","useRef","related","useCallback","filter","ele","category","_id","useEffect","fetch","process","concat","productId","then","res","json","console","log","catch","err","showDetailHandler","index","idDetail","_jsxs","_Fragment","children","className","classes","_jsx","src","image","alt","name","editPrice","price","short_desc","htmlFor","for","ref","type","id","min","max","step","defaultValue","onChange","e","target","value","long_desc","length","map","Products","item","click","onClick","preventDefault","ToastContainer","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme","DetailProduct"],"sourceRoot":""}